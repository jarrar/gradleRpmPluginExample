/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

buildscript {
	repositories {
		jcenter()
	}

	dependencies {
		classpath 'com.netflix.nebula:gradle-ospackage-plugin:6.1.1'
	}
}


ext {
	OUTPUT_DIR = "${rootDir}/_build/linux"
}


allprojects {
	task makeRpm {

		doLast { task ->
			println "I'm $task.project.name"
		}
	}
}

subprojects {
	apply plugin: "nebula.ospackage"
	makeRpm.dependsOn(['buildDevelRpm', 'buildRuntimeRpm'])
}

apply plugin: org.packaging.plugin.GreetingPlugin

// Greeting

greetingData {
	message = 'Greetings people of the '
	greeter = 'Planet earth'
}

ext.greetingFile = "$buildDir/hello.txt"

//task greet(type: org.packaging.plugin.GreetingToFileTask) {
//	destination = { project.greetingFile }
//}

task sayGreeting(dependsOn: hello) {
	doLast {
		println file(project.greetingFile).text
	}
}
